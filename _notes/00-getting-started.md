---
layout: page
title: Getting Started with Stack
permalink: /getting-started/
visible: true
---

This guide will get you running your first Haskell program, and will hopefully
get you familiar with how Haskell's build tool, Stack, works, and how you can
use `.cabal` files to configure your projects.

### Installing Haskell

The best way to install Haskell as of now is via
[Stack](https://www.haskell.org/downloads#stack). Go through the instructions
for your OS and come back when it's installed.

After this, head
[here](https://docs.haskellstack.org/en/stable/README/#quick-start-guide) and
run the series of commands in a new terminal session. You should see `someFunc`
printed to the screen.

### What is Stack?

Stack is the build tool of choice for Haskell. A build tool is just a program
that automates the otherwise tedious build process. The [docs for
Stack](https://docs.haskellstack.org/en/stable/README/) are quite good so
they're a great place to start. Visit the [user
guide](https://docs.haskellstack.org/en/stable/GUIDE/) once you have a better
idea of how everything works. If you're new to programming, there are bound to
be terms you don't understand, so this is a good time to get used to looking up
these terms.

### Understanding `.cabal` files

Take a look at the `.cabal` file generated by Stack (should be called
`my-project.cabal` if you followed the steps above). The first group of settings
are not complicated, it's just project metadata (i.e. data that describes the
project itself). The interesting sections are the `library` and `executable`
sections. Let's take a look at `library` first.

```cabal
library
  hs-source-dirs:     src
  exposed-modules:    Lib
  build-depends:      base >= 4.7 && < 5
  default-language:   Haskell2010
```

The `library` keyword specifies (you guessed it) a library (i.e. code that does
*not* generate an executable). Libraries typically exist to provide some feature
not present in the standard libraries, which offer the most basic functionality.

- `hs-source-dirs` specifies the location of the source files for your library.
- `exposed-modules` specifies the modules visible to users of your library (you
  do not necessarily want to expose all modules)
- `build-depends` specifies the dependencies for your library, i.e. any other
  libraries your library imports. All Haskell projects necessarily depend on
  `base`, the Haskell standard library, the version of which must be greater
  than or equal to 4.7 and less than 5.
- `default-language` specifies the particular language standard the library
  adheres to.

Unsurprisingly, the `executable` keyword describes code that compiles to an
executable. In this case, the executable will be called `my-project-exe`, but
you can change that value to whatever you want.

```
executable my-project-exe
  hs-source-dirs:      app
  main-is:             Main.hs
  ghc-options:         -threaded -rtsopts -with-rtsopts=-N
  build-depends:       base
                     , my-project
  default-language:    Haskell2010
```

In this case we have some different options.

- `main-is` specifies the entry point for the program (it should contain the
  main function).
- `ghc-options` are just compiler flags that are passed to `ghc` at compile
  time, you can read up on what these do.
  
Notice that the executable is set to depend on your library `my-project`.

### Adding dependencies

The main thing to understand is how to add dependencies to your library.
Happily, this is extraordinarily simple. Suppose we want to import the
[`time`](https://hackage.haskell.org/package/time) library, and we want to make
sure the version is `1.8.*`, i.e. any version that starts with `1.8`. We simply
add this to our `build-depends` section:

```cabal
library
  hs-source-dirs:     src
  exposed-modules:    Lib
  build-depends:      base >= 4.7 && < 5
                    , time >= 1.8 && < 1.9
  default-language:   Haskell2010
```

Staying on version `1.8` means we can still get minor updates (like bugfixes), but
if the version advances to `1.9` we ignore it because it may change the library in
a way that breaks our project. See
[here](https://pvp.haskell.org/#version-numbers) for more information on
Haskell's package versioning policy (PVP).
